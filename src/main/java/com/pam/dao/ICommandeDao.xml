<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pam.dao.ICommandeDao">
	<insert id="insertCommande">
		insert into commande(nom_site, date_commande, date_payer, date_livraison, prix_livraison, prix_sous_total,
					 prix_total, statut, info, nom_acheteur, add_acheteur, Utilisateur_idUtilisateur) 
			   values(#{nom_site}, #{date_commande}, #{date_payer}, #{date_livraison}, #{prix_livraison}, 
			   		#{prix_sous_total}, #{prix_total}, #{statut}, #{info}, #{nom_acheteur}, #{add_acheteur}, #{Utilisateur_idUtilisateur})
	</insert>
	
	<insert id="insertCommandeCatcheId">
		insert into commande(nom_site, date_commande, date_payer, date_livraison, prix_livraison, prix_sous_total,
					 prix_total, statut, info, nom_acheteur, add_acheteur, Utilisateur_idUtilisateur) 
			   values(#{nom_site}, #{date_commande}, #{date_payer}, #{date_livraison}, #{prix_livraison}, 
			   		#{prix_sous_total}, #{prix_total}, #{statut}, #{info}, #{nom_acheteur}, #{add_acheteur}, #{Utilisateur_idUtilisateur})
		<selectKey resultType="int" keyProperty="idCommande" order="AFTER">
			select @@identity
		</selectKey>
	</insert>
	
	<insert id="insertCommandeDetail">
		insert into detailCommande(Commande_idCommande, Commande_Utilisateur_idUtilisateur, Produits_idProduits, quantite) 
			   values(#{idCommande}, #{idUtilisateur}, #{idProduit}, #{quantite})
	</insert>
</mapper>